<?php
$sites = [
    'https://ventomaquia.com',
    'https://therocket.cliente.work',
    'https://obscuroplacer.com',
    'https://sca.cliente.work',
    'https://bysantik.com',
    'https://juan-palma.idalibre.com',
    'https://ahorcado.idalibre.com',
    'https://yariel.site/',
    'https://solael.mx',
    'https://amatista-envases.com/',
    'https://1975studio.com',
    'https://canadaviajes.cliente.work/toronto',
    'https://canadaviajes.cliente.work/quebec',
    'https://canadaviajes.cliente.work/ontario',
    'https://tp-abogados.com',
    'https://inmotion.cliente.work',
    'https://ciasa.cliente.work',
    'https://tocho.cliente.work',
    'https://toner.cliente.work',

    // Añade más URLs aquí
];
?>
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=yes, minimum-scale=1.0, maximum-scale=3.0, initial-scale=1.0, viewport-fit=cover" />
    <meta http-equiv="Content-Encoding" content="gzip" />
    <meta http-equiv="Accept-Encoding" content="gzip, deflate" />

    <meta name="facebook-domain-verification" content="v6kip5x88ivvhkw8x4unpx09k7m1lh" />

    <!-- Google Tag Manager -->
    <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-M4SVLLSH');
    </script>
    <!-- End Google Tag Manager -->

    <title>Portafolio de Proyectos Realizados</title>
    <meta name="description" content="Estas en nuestro portafolio de proyectos que hemos realizado para clientes, agencias y nuestros corporativos">
    </meta>

    <meta property="og:type" content="WEBSITE" />
    <meta property="og:url" content="https://cliente.work" />
    <meta property="og:site_name" content="SCA | especialistas en gestión ambiental empresarial" />
    <!-- <meta property="fb:app_id" content="ID-FACEBOOK-APP" /> -->

    <meta property="og:title" content="Portafolio de Proyectos Realizados" />
    <meta property="og:description" content="Estas en nuestro portafolio de proyectos que hemos realizado para clientes, agencias y nuestros corporativos" />
    <meta property="og:image" content="https://cliente.work/assets/img/facebook_web_img_article.jpg" />
    <meta property="og:image:alt" content="Portada del sitio web" />
    <meta property="og:image:type" content="image/jpeg" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sen:wght@400;700;800&display=swap');

        body {
            font-family: 'Sen', Roboto, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #1d2129;
        }

        .portfolio {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .card {
            min-height: 400px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
            border: 1px solid #dddfe2;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
            .loading{
                width: 100%;
                height: 100%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            .card-image {
                width: 100%;
                height: 250px;
                object-fit: cover;
                border-bottom: 1px solid #eee;
            }

            .card-content {
                padding: 15px;
            }

            .card-domain {
                font-size: 12px;
                color: #606770;
                margin-bottom: 5px;
            }

            .card-title {
                font-size: 16px;
                font-weight: 600;
                color: #1d2129;
                margin: 0 0 8px 0;
            }

            .card-desc {
                font-size: 14px;
                color: #606770;
                line-height: 1.4;
            }

            .infoBox {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: min(100%, 800px);
                margin: 0 auto 22px;

            }
            .infoBox h2{
                margin-top: 52px;
            }

            @media (max-width: 600px) {
                .portfolio {
                    grid-template-columns: 2fr;
                }

                .intro {
                    padding: 10px 8vw;
                }
            }

            .desaparecer {
                position: absolute;
                display: none;
                visibility: hidden;
                overflow: hidden;
                width: 0px !important;
                height: 0px !important;
            }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M4SVLLSH"
            height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="infoBox">
        <h1>Portafolio de Proyectos Realizados</h1>
        <p class="intro">
            Te encuentras en nuestro portafolio de proyectos, aquí encontraras desarrollos web hechos para clientes, agencias con quien colaboramos he incluso nuestros sitios corporativos.
        </p>
        <p class="intro">
            Sabemos que disfrutarás de cada uno de nuestros sitios esperando poder trabajar juntos, claro... si te sientes convencido y contento con lo que hacemos y como lo hacemos 😀
        </p>
        <p class="intro">
            Si deseas cotizar el desarrollo de algun sitio, mejora o herramienta, contacta con la persona que te brindo este enlace, si llegaste desde un anuncio, en el mismo encontraras información de contactos.
        </p>

        <h2>Algunos sitios desarrollados por nosotros:</h2>
    </div>

    <div class="portfolio">
        <?php foreach ($sites as $url): ?>
            <article class="card" data-url="<?php echo htmlspecialchars($url); ?>">
                
                <div class="loading">
                    <img src="./assets/img/ajax.v1.webp" alt="loading..." width="40" height="40" class="card-loading">
                    <p>Cargando datos...</p>
                </div>
            </article>
        <?php endforeach; ?>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".card").forEach(card => {
                const url = card.dataset.url;
                fetch("src/MetaPreview.php?site=" + encodeURIComponent(url))
                    .then(res => res.json())
                    .then(data => {
                        if (data.error !== false) {
                            card.innerHTML.classList.add("desaparecer");
                            return;
                        }
                        card.innerHTML = `
                            <a href="${data.url}" target="_blank" class="cardLink">
                                ${data.image ? `<img src="${data.image}"
                                    alt="${data.title}"
                                    class="card-image"
                                    onerror="this.style.display='none'"
                                >` : ""}
                                
                                <div class="card-content">
                                    <div class="card-domain">
                                        ${data.url}
                                    </div>
                                    <h3 class="card-title">
                                        ${data.title}
                                    </h3>
                                    <p class="card-desc">
                                       ${data.description}
                                    </p>
                                </div>
                            </a>
                        `;
                    })
                    .catch(() => {
                        card.innerHTML.classList.add("desaparecer");
                    });
            });
        });
    </script>
</body>

</html>